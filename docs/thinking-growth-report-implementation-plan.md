# 思考成長レポート実装方針

テックリードへの成長を支援する「視点スイッチング訓練ツール」の実装計画。

## 概要

木（詳細）と森（俯瞰）を自由に行き来し、複数の視点（技術者・PO・CTO・ユーザーなど）で思考できる力を鍛えるためのレポート機能。

---

## フェーズ構成

### フェーズ1: 週次レポート（木と森）

**目的**: 自分の思考を俯瞰する習慣をつける

**機能**:
- 思考フェーズ判定（探索→構造化→実装→振り返り）
- 偏りアラート（特定カテゴリへの集中検知）
- 空白領域の提示（長期間触れてないクラスタ）
- 森から木へのドリルダウン（クリックで詳細表示）

**データソース**:
- `clustering_snapshots`: changeScore, notesAdded, avgCohesion
- `cluster_events`: 分裂・統合・消滅イベント
- `cluster_identities`: 思考系譜のラベル

**実装コスト**: 低

---

### フェーズ1.5: 他者視点の問い自動生成

**目的**: 自分以外の視点の存在に気づかせる

**機能**:
- 週次レポートに「他者視点からの問い」セクションを追加
- 今週の思考内容に対して、PO・CTO・ユーザー視点からの問いを自動生成

**例**:
```markdown
### 🤔 他の視点からの問い
- PO視点: この機能、ユーザーは本当に欲しがってる？
- CTO視点: この技術選定、チームの成長に繋がる？
- ユーザー視点: これで操作は簡単になる？
```

**実装コスト**: 低（レポート生成時に問いテンプレートを挿入）

---

### フェーズ2: perspective タグ + 視点分布チャート

**目的**: 視点の偏りを数値で把握する

**機能**:
- ノート保存時に perspective タグを選択可能（任意）
- 視点分布のバーチャート/パイチャート表示
- 週次・月次での視点分布推移グラフ

**視点タイプ**:
| 視点 | 説明 |
|-----|------|
| engineer | 技術的正しさ、実装詳細 |
| po | ビジネス価値、ユーザー課題 |
| user | 使いやすさ、UX |
| cto | 技術戦略、スケーラビリティ |
| team | チームメンバー、協業 |
| stakeholder | 経営、事業インパクト |

**スキーマ変更**:
```typescript
// notes テーブルに perspective カラム追加
perspective: text("perspective") // 'engineer' | 'po' | 'user' | 'cto' | 'team' | 'stakeholder' | null
```

**実装コスト**: 中

---

### フェーズ2.5: 週次チャレンジ提案

**目的**: 足りない視点で実際に考える行動を促す

**機能**:
- 視点分布を分析し、不足している視点を特定
- 「今週は○○視点でノートを1つ書いてみて」と提案
- 翌週レポートで達成状況を表示

**例**:
```markdown
### 💡 今週のチャレンジ
PO視点が3週連続で10%以下です。

**提案**: 今週は以下の問いでノートを1つ書いてみてください：
「現在取り組んでいる機能で、ユーザーが最も喜ぶポイントは何か？」
```

**実装コスト**: 低

---

### フェーズ3: 視点テンプレート & ガイド付き思考

**目的**: 各視点での「考え方」を学ぶ

**機能**:
- 視点ごとのガイド質問テンプレート
- テンプレートを使ってノート作成開始
- 視点別のベストプラクティス表示

**PO視点テンプレート例**:
```markdown
## PO視点でのノート

### 解決する課題
- ユーザーのどんな課題を解決する？

### 成功指標
- どう測定する？（KPI）

### 優先度判断
- なぜ今やるべき？やらないとどうなる？

### トレードオフ
- 何を捨てて何を取る？
```

**実装コスト**: 中

---

### フェーズ4: 視点間接続マップ

**目的**: 視点を「切り替える」だけでなく「統合する」力をつける

**機能**:
- 同一トピックに対する複数視点ノートの関連付け
- 視点間の接続を可視化するネットワーク図
- 視点統合ノート（Decision Record）の作成支援

**表示例**:
```
        [OAuth導入]
            │
    ┌───────┼───────┐
    ↓       ↓       ↓
 技術者   PO      ユーザー
 "JWT vs   "導入    "ログイン
  Session"  コスト"   楽になる?"
    │       │       │
    └───────┴───────┘
            ↓
    [統合: OAuth導入決定]
```

**実装コスト**: 高

---

### フェーズ5: チーム共有 & フィードバック

**目的**: 他者からの補正で視点の精度を上げる

**機能**:
- ノートの共有機能（読み取り専用リンク生成）
- フィードバックコメント機能
- 「この視点が抜けてる」指摘の受け取り
- フィードバック反映後の差分表示

**実装コスト**: 高

---

### フェーズ6: 意思決定シミュレーター

**目的**: 上位職の意思決定を安全に疑似体験する

**機能**:
- シナリオベースの意思決定演習
- 複数ステークホルダーの意見を提示
- 判断を記録し、後で振り返り
- 実際の結果との比較（オプション）

**シナリオ例**:
```markdown
## シナリオ: 認証基盤のリプレイス

あなたはCTOとして判断してください。

### ステークホルダーの意見
- 技術チーム: 「AWS Cognitoを使いたい。運用が楽になる」
- PO: 「コスト増は困る。現状維持でいいのでは」
- セキュリティ: 「自前認証は危険。マネージドに移行すべき」
- CFO: 「来期の予算は厳しい」

### あなたの判断は？
[判断を記録する]
```

**実装コスト**: 高

---

## 運用フロー

### 日常（毎日）
- 通常のノート作成
- 保存時に perspective タグを選択（任意、ワンクリック）

### 週次（5分）
1. レポートを開く（自動生成済み）
2. 森を見る: 思考フェーズ・視点分布確認
3. 気になる点で木に潜る（任意）
4. チャレンジを確認
5. 週の中で意識して実践

### 月次（10分）
1. 月次サマリー確認
2. 視点分布の推移確認
3. 来月のフォーカス設定

---

## 技術スタック

- **バックエンド**: Hono (既存)
- **フロントエンド**: React + Recharts（グラフ）
- **データ**: SQLite + Drizzle (既存)
- **レポート生成**: サーバーサイドで週次バッチ or オンデマンド

---

## 実装優先度

| フェーズ | 実装コスト | 効果 | 優先度 |
|---------|----------|------|--------|
| 1 | 低 | 高 | ★★★ |
| 1.5 | 低 | 中 | ★★★ |
| 2 | 中 | 高 | ★★★ |
| 2.5 | 低 | 高 | ★★★ |
| 3 | 中 | 中 | ★★ |
| 4 | 高 | 中 | ★ |
| 5 | 高 | 高 | ★ |
| 6 | 高 | 高 | ★ |

**まずフェーズ2.5まで実装し、運用しながら次のフェーズを判断する。**

---

## 成功指標

- 週次レポート閲覧率: 80%以上
- perspective タグ付与率: 50%以上（フェーズ2以降）
- 視点分布の偏り改善: 3ヶ月で最低視点が10%→20%
- チャレンジ達成率: 60%以上
