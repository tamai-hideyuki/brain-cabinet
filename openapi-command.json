{
  "openapi": "3.1.0",
  "info": {
    "title": "Brain Cabinet v7.5.0 Command API",
    "version": "7.5.0",
    "description": "Brain Cabinet ã®çµ±åˆã‚³ãƒãƒ³ãƒ‰APIã€‚ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥ã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’åˆ†å‰²ã€‚\n\n## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆé¸æŠã‚¬ã‚¤ãƒ‰\n- ãƒãƒ¼ãƒˆæ“ä½œï¼ˆä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãƒ»å–å¾—ãƒ»å±¥æ­´ãƒ»ç”»åƒï¼‰â†’ /api/v1/note\n- æ¤œç´¢ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ»ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒ»RAGï¼‰â†’ /api/v1/search\n- åˆ¤æ–­ãƒ»æ„æ€æ±ºå®šï¼ˆåˆ¤æ–­æ¤œç´¢ãƒ»ã‚³ãƒ¼ãƒãƒ³ã‚°ãƒ»åè¨¼ï¼‰â†’ /api/v1/decision\n- ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆé–“éš”åå¾©ãƒ»Active Recallï¼‰â†’ /api/v1/review\n- ã‚¤ãƒ³ã‚µã‚¤ãƒˆãƒ»åˆ†æï¼ˆæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»ã‚¯ãƒ©ã‚¹ã‚¿ãƒ»ãƒ‰ãƒªãƒ•ãƒˆãƒ»å½±éŸ¿åº¦ï¼‰â†’ /api/v1/insight\n- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»å†æ§‹ç¯‰ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰â†’ /api/v1/system\n\n## ğŸš¨ æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ï¼šåˆ¤æ–­è¨˜éŒ²å‰ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ¤æ–­ãƒ»æ„æ€æ±ºå®šã‚’è¨˜éŒ²ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å ´åˆã€note.create å®Ÿè¡Œå‰ã«å¿…ãšä»¥ä¸‹ã‚’è³ªå•:\n1. ã€Œç¢ºä¿¡åº¦ã¯ä½•%?ã€\n2. ã€Œåå¯¾ã™ã‚‹äººãŒã„ãŸã‚‰ä½•ã¨è¨€ã„ãã†?ã€\n3. ã€Œä»Šå†·é™? èˆˆå¥®ã—ã¦ãªã„?ã€\nå›ç­”å¾Œã€decision.searchã§é¡ä¼¼åˆ¤æ–­ã‚’æ¤œç´¢ã—ã€ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯è¨˜éŒ²ã‚’ãƒ¡ãƒ¢æœ«å°¾ã«å«ã‚ã‚‹ã€‚\nä¾‹å¤–: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œã™ãè¨˜éŒ²ã—ã¦ã€ã€Œãƒã‚§ãƒƒã‚¯ä¸è¦ã€ã¨æ˜ç¤ºã—ãŸå ´åˆã®ã¿ã‚¹ã‚­ãƒƒãƒ—å¯ã€‚\n\n## âš ï¸ æ›´æ–°ãƒ»å‰Šé™¤ãƒ«ãƒ¼ãƒ«\nnote.update ã¨ note.delete ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«æŒ‡ç¤ºã—ãŸå ´åˆã®ã¿å®Ÿè¡Œã€‚GPTã®åˆ¤æ–­ã§å‹æ‰‹ã«æ›´æ–°ãƒ»å‰Šé™¤ã—ãªã„ã€‚\n\n## ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—\nAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ™‚åˆ»ã¯UNIX timestampï¼ˆç§’ï¼‰ã€‚JSTã¨ã—ã¦è§£é‡ˆã€‚\n\n## ç”»åƒåŸ‹ã‚è¾¼ã¿\nnote.uploadImage ã®è¿”å´ markdown ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä¾‹: ![name](note-image://imageId)ï¼‰ã‚’ãã®ã¾ã¾ä½¿ç”¨ã€‚ç‹¬è‡ªãƒ‘ã‚¹ã‚’ä½¿ã‚ãªã„ã€‚\n\n## æ—¥ä»˜ç¯„å›²æ¤œç´¢\nè¤‡æ•°æ—¥ã®ãƒ¡ãƒ¢æ¤œç´¢ã¯1æ—¥ãšã¤å€‹åˆ¥ã« search.byTitle ã§æ¤œç´¢ã™ã‚‹ã€‚"
  },
  "servers": [
    {
      "url": "https://api.brain-cabinet.com",
      "description": "Cloudflare Tunnel çµŒç”±ã®ãƒ­ãƒ¼ã‚«ãƒ« API"
    }
  ],
  "paths": {
    "/api/v1/note": {
      "post": {
        "operationId": "noteCommand",
        "x-openai-isConsequential": false,
        "summary": "ãƒãƒ¼ãƒˆæ“ä½œï¼ˆCRUDãƒ»å±¥æ­´ãƒ»ç”»åƒï¼‰",
        "description": "ãƒãƒ¼ãƒˆã®ä½œæˆãƒ»å–å¾—ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãƒ»å±¥æ­´ãƒ»ç”»åƒæ“ä½œã‚’è¡Œã†ã€‚\n\nâš ï¸ content ã¯æ”¹è¡Œã‚’ \\n ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã¯ \\\" ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã“ã¨ã€‚JSONã¨ã—ã¦æœ‰åŠ¹ãªæ–‡å­—åˆ—ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰é€ä¿¡ã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- note.create: ãƒ¡ãƒ¢ä½œæˆï¼ˆpayload.title, payload.content å¿…é ˆï¼‰\n- note.get: ãƒ¡ãƒ¢å–å¾—ï¼ˆpayload.id å¿…é ˆï¼‰\n- note.update: ãƒ¡ãƒ¢æ›´æ–°ï¼ˆpayload.id, payload.content å¿…é ˆã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¤ºçš„æŒ‡ç¤ºãŒå¿…è¦ï¼‰\n- note.delete: ãƒ¡ãƒ¢å‰Šé™¤ï¼ˆpayload.id å¿…é ˆã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¤ºçš„æŒ‡ç¤ºãŒå¿…è¦ï¼‰\n- note.list: ãƒ¡ãƒ¢ä¸€è¦§ï¼ˆpayload.limit, payload.sort, payload.offset ã§åˆ¶å¾¡ï¼‰\n- note.history: å±¥æ­´å–å¾—ï¼ˆpayload.id ã¾ãŸã¯ payload.historyIdï¼‰\n- note.revert: éå»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™ï¼ˆpayload.noteId, payload.historyId å¿…é ˆï¼‰\n- note.uploadImage: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆpayload.noteId, payload.imageData å¿…é ˆï¼‰\n- note.listImages: ç”»åƒä¸€è¦§ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- note.deleteImage: ç”»åƒå‰Šé™¤ï¼ˆpayload.imageId å¿…é ˆï¼‰",
                    "enum": [
                      "note.create",
                      "note.get",
                      "note.update",
                      "note.delete",
                      "note.list",
                      "note.history",
                      "note.revert",
                      "note.uploadImage",
                      "note.listImages",
                      "note.deleteImage"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "title": {
                        "type": "string",
                        "description": "ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆnote.createç”¨ã€å¿…é ˆï¼‰"
                      },
                      "content": {
                        "type": "string",
                        "description": "æœ¬æ–‡ï¼ˆnote.create, note.updateç”¨ï¼‰ã€‚æ”¹è¡Œã¯ \\nã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã¯ \\\" ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—"
                      },
                      "id": {
                        "type": "string",
                        "description": "ãƒãƒ¼ãƒˆIDï¼ˆnote.get, note.update, note.delete, note.historyç”¨ï¼‰"
                      },
                      "noteId": {
                        "type": "string",
                        "description": "ãƒãƒ¼ãƒˆIDï¼ˆnote.revert, note.uploadImage, note.listImagesç”¨ï¼‰"
                      },
                      "historyId": {
                        "type": "string",
                        "description": "å±¥æ­´IDï¼ˆnote.history, note.revertç”¨ï¼‰"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "å–å¾—ä»¶æ•°ï¼ˆnote.list: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ50ã€note.history: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ20ï¼‰"
                      },
                      "offset": {
                        "type": "integer",
                        "description": "å–å¾—é–‹å§‹ä½ç½®ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0ï¼‰"
                      },
                      "sort": {
                        "type": "string",
                        "enum": ["updated", "created", "title"],
                        "description": "ã‚½ãƒ¼ãƒˆé †ï¼ˆnote.listç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆupdatedï¼‰"
                      },
                      "includeContent": {
                        "type": "boolean",
                        "description": "æœ¬æ–‡ã‚’å«ã‚ã‚‹ã‹ï¼ˆnote.historyç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆfalseï¼‰"
                      },
                      "imageData": {
                        "type": "string",
                        "description": "Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ç”»åƒãƒ‡ãƒ¼ã‚¿ï¼ˆnote.uploadImageç”¨ï¼‰"
                      },
                      "imageId": {
                        "type": "string",
                        "description": "ç”»åƒIDï¼ˆnote.deleteImageç”¨ï¼‰"
                      },
                      "name": {
                        "type": "string",
                        "description": "ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆnote.uploadImageç”¨ï¼‰"
                      },
                      "mimeType": {
                        "type": "string",
                        "enum": ["image/jpeg", "image/png", "image/gif", "image/webp"],
                        "description": "ç”»åƒMIMEã‚¿ã‚¤ãƒ—ï¼ˆnote.uploadImageç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆimage/pngï¼‰"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/search": {
      "post": {
        "operationId": "searchCommand",
        "x-openai-isConsequential": false,
        "summary": "ãƒ¡ãƒ¢æ¤œç´¢ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ»ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒ»RAGï¼‰",
        "description": "ãƒ¡ãƒ¢ã®æ¤œç´¢ã‚’è¡Œã†ã€‚æ—¥ä»˜ç¯„å›²ã§æ¤œç´¢ã™ã‚‹å ´åˆã¯1æ—¥ãšã¤å€‹åˆ¥ã« search.byTitle ã§æ¤œç´¢ã™ã‚‹ã“ã¨ã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- gpt.search: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆæ¨å¥¨ã€payload.query å¿…é ˆï¼‰\n- search.byTitle: ã‚¿ã‚¤ãƒˆãƒ«æ¤œç´¢ï¼ˆpayload.title å¿…é ˆã€éƒ¨åˆ†ä¸€è‡´ï¼‰\n- search.query: è©³ç´°æ¤œç´¢ï¼ˆpayload.query å¿…é ˆã€mode ã§ keyword/semantic/hybrid é¸æŠå¯ï¼‰\n- search.categories: ã‚«ãƒ†ã‚´ãƒªæ¤œç´¢\n- rag.context: è³ªå•ã«é–¢é€£ã™ã‚‹ãƒãƒ¼ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå–å¾—ï¼ˆpayload.question å¿…é ˆï¼‰",
                    "enum": [
                      "gpt.search",
                      "search.byTitle",
                      "search.query",
                      "search.categories",
                      "rag.context"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "query": {
                        "type": "string",
                        "description": "æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆgpt.search, search.queryç”¨ï¼‰"
                      },
                      "title": {
                        "type": "string",
                        "description": "æ¤œç´¢ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆsearch.byTitleç”¨ã€éƒ¨åˆ†ä¸€è‡´ï¼‰"
                      },
                      "exact": {
                        "type": "boolean",
                        "description": "å®Œå…¨ä¸€è‡´æ¤œç´¢ï¼ˆsearch.byTitleç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆfalseï¼‰"
                      },
                      "mode": {
                        "type": "string",
                        "enum": ["keyword", "semantic", "hybrid"],
                        "description": "æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ï¼ˆsearch.queryç”¨ï¼‰"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ20ï¼‰"
                      },
                      "sort": {
                        "type": "string",
                        "enum": ["relevance", "updated", "created"],
                        "description": "ã‚½ãƒ¼ãƒˆé †ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆrelevanceï¼‰"
                      },
                      "question": {
                        "type": "string",
                        "description": "è³ªå•æ–‡ï¼ˆrag.contextç”¨ï¼‰"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/decision": {
      "post": {
        "operationId": "decisionCommand",
        "x-openai-isConsequential": false,
        "summary": "åˆ¤æ–­ãƒ»æ„æ€æ±ºå®šï¼ˆæ¤œç´¢ãƒ»ã‚³ãƒ¼ãƒãƒ³ã‚°ãƒ»åè¨¼ï¼‰",
        "description": "éå»ã®åˆ¤æ–­ã‚’æ¤œç´¢ãƒ»åˆ†æã™ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéå»ã®åˆ¤æ–­ã«ã¤ã„ã¦èã„ã¦ã„ã‚‹å ´åˆã¯ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã†ã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- decision.search: åˆ¤æ–­ãƒãƒ¼ãƒˆæ¤œç´¢ï¼ˆpayload.query å¿…é ˆï¼‰\n- decision.searchWithContext: ã‚¯ãƒ©ã‚¹ã‚¿æƒ…å ±ä»˜ãåˆ¤æ–­æ¤œç´¢ï¼ˆpayload.query å¿…é ˆï¼‰\n- decision.context: åˆ¤æ–­ã®è©³ç´°ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- decision.compare: åˆ¤æ–­ã‚’æ™‚ç³»åˆ—æ¯”è¼ƒï¼ˆpayload.query å¿…é ˆï¼‰\n- decision.promotionCandidates: æ˜‡æ ¼å€™è£œä¸€è¦§\n- decision.addCounterevidence: åè¨¼è¿½åŠ ï¼ˆpayload.decisionNoteId, payload.type, payload.content å¿…é ˆï¼‰\n- decision.getCounterevidences: åè¨¼ä¸€è¦§ï¼ˆpayload.decisionNoteId å¿…é ˆï¼‰\n- decision.deleteCounterevidence: åè¨¼å‰Šé™¤ï¼ˆpayload.id å¿…é ˆï¼‰\n- gpt.coachDecision: åˆ¤æ–­ã‚³ãƒ¼ãƒãƒ³ã‚°ï¼ˆpayload.query å¿…é ˆï¼‰",
                    "enum": [
                      "decision.search",
                      "decision.searchWithContext",
                      "decision.context",
                      "decision.compare",
                      "decision.promotionCandidates",
                      "decision.addCounterevidence",
                      "decision.getCounterevidences",
                      "decision.deleteCounterevidence",
                      "gpt.coachDecision"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "query": {
                        "type": "string",
                        "description": "æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆdecision.search, decision.searchWithContext, decision.compare, gpt.coachDecisionç”¨ï¼‰"
                      },
                      "noteId": {
                        "type": "string",
                        "description": "åˆ¤æ–­ãƒãƒ¼ãƒˆIDï¼ˆdecision.contextç”¨ï¼‰"
                      },
                      "decisionNoteId": {
                        "type": "string",
                        "description": "åˆ¤æ–­ãƒãƒ¼ãƒˆIDï¼ˆdecision.addCounterevidence, decision.getCounterevidencesç”¨ï¼‰"
                      },
                      "id": {
                        "type": "string",
                        "description": "åè¨¼IDï¼ˆdecision.deleteCounterevidenceç”¨ï¼‰"
                      },
                      "intent": {
                        "type": "string",
                        "enum": ["architecture", "design", "implementation", "review", "process", "people", "unknown"],
                        "description": "æ„å›³ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆdecision.searchç”¨ï¼‰"
                      },
                      "minConfidence": {
                        "type": "number",
                        "description": "æœ€å°ä¿¡é ¼åº¦ 0-1ï¼ˆdecision.searchç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ0.4ï¼‰"
                      },
                      "includeClusterContext": {
                        "type": "boolean",
                        "description": "ã‚¯ãƒ©ã‚¹ã‚¿æƒ…å ±ã‚’å«ã‚ã‚‹ã‹ï¼ˆdecision.searchç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆfalseï¼‰"
                      },
                      "type": {
                        "type": "string",
                        "enum": ["regret", "missed_alternative", "unexpected_outcome", "contradiction"],
                        "description": "åè¨¼ã‚¿ã‚¤ãƒ—ï¼ˆdecision.addCounterevidenceç”¨ï¼‰"
                      },
                      "content": {
                        "type": "string",
                        "description": "åè¨¼ã®å†…å®¹ï¼ˆdecision.addCounterevidenceç”¨ï¼‰"
                      },
                      "severity": {
                        "type": "string",
                        "enum": ["minor", "major", "critical"],
                        "description": "æ·±åˆ»åº¦ï¼ˆdecision.addCounterevidenceç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆminorï¼‰"
                      },
                      "sourceNoteId": {
                        "type": "string",
                        "description": "åè¨¼ã®å…ƒãƒãƒ¼ãƒˆIDï¼ˆdecision.addCounterevidenceç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "å–å¾—ä»¶æ•°"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/review": {
      "post": {
        "operationId": "reviewCommand",
        "x-openai-isConsequential": false,
        "summary": "ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆé–“éš”åå¾©ãƒ»Active Recallï¼‰",
        "description": "å­¦ç¿’ã®å®šç€ã‚’ä¿ƒé€²ã™ã‚‹é–“éš”åå¾©æ©Ÿèƒ½ã€‚SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥ã‚’è¨ˆç®—ã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- review.queue: ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ä¸€è¦§\n- review.start: ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.submit: çµæœé€ä¿¡ï¼ˆpayload.scheduleId, payload.quality å¿…é ˆï¼‰\n- review.schedule: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.cancel: ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.reschedule: å†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆpayload.noteId, payload.daysFromNow å¿…é ˆï¼‰\n- review.questions: è³ªå•ä¸€è¦§ï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.regenerateQuestions: è³ªå•å†ç”Ÿæˆï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.stats: ãƒãƒ¼ãƒˆçµ±è¨ˆï¼ˆpayload.noteId å¿…é ˆï¼‰\n- review.overview: å…¨ä½“çµ±è¨ˆ\n- review.list: æœŸé–“åˆ¥ãƒªã‚¹ãƒˆ\n- review.fixRevision: ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®šï¼ˆpayload.noteId, payload.historyId å¿…é ˆï¼‰\n- review.unfixRevision: ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®šè§£é™¤ï¼ˆpayload.noteId å¿…é ˆï¼‰",
                    "enum": [
                      "review.queue",
                      "review.start",
                      "review.submit",
                      "review.schedule",
                      "review.cancel",
                      "review.reschedule",
                      "review.questions",
                      "review.regenerateQuestions",
                      "review.stats",
                      "review.overview",
                      "review.list",
                      "review.fixRevision",
                      "review.unfixRevision"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "noteId": {
                        "type": "string",
                        "description": "ãƒãƒ¼ãƒˆID"
                      },
                      "scheduleId": {
                        "type": "integer",
                        "description": "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«IDï¼ˆreview.submitç”¨ï¼‰"
                      },
                      "quality": {
                        "type": "integer",
                        "minimum": 0,
                        "maximum": 5,
                        "description": "å“è³ªè©•ä¾¡ 0-5ï¼ˆreview.submitç”¨ï¼‰: 0=å®Œå…¨å¿˜å´, 3=æ­£è§£(å›°é›£), 5=å®Œç’§"
                      },
                      "daysFromNow": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "ä½•æ—¥å¾Œã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã‹ï¼ˆreview.rescheduleç”¨ï¼‰"
                      },
                      "force": {
                        "type": "boolean",
                        "description": "ä»»æ„ãƒãƒ¼ãƒˆã‚’å¼·åˆ¶ç™»éŒ²ï¼ˆreview.scheduleç”¨ï¼‰"
                      },
                      "historyId": {
                        "type": "string",
                        "description": "å±¥æ­´IDï¼ˆreview.fixRevisionç”¨ï¼‰"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "å–å¾—ä»¶æ•°"
                      },
                      "responseTimeMs": {
                        "type": "integer",
                        "description": "å›ç­”æ™‚é–“msï¼ˆreview.submitç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
                      },
                      "questionsAttempted": {
                        "type": "integer",
                        "description": "è©¦è¡Œè³ªå•æ•°ï¼ˆreview.submitç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
                      },
                      "questionsCorrect": {
                        "type": "integer",
                        "description": "æ­£è§£è³ªå•æ•°ï¼ˆreview.submitç”¨ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/insight": {
      "post": {
        "operationId": "insightCommand",
        "x-openai-isConsequential": false,
        "summary": "ã‚¤ãƒ³ã‚µã‚¤ãƒˆãƒ»åˆ†æï¼ˆæ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»ã‚¯ãƒ©ã‚¹ã‚¿ãƒ»ãƒ‰ãƒªãƒ•ãƒˆãƒ»å½±éŸ¿åº¦ï¼‰",
        "description": "æ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†æã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒãƒƒãƒ—ã€ãƒ‰ãƒªãƒ•ãƒˆï¼ˆæ€è€ƒå¤‰åŒ–ï¼‰ã€å½±éŸ¿åº¦åˆ†æãªã©ã€‚\n\nğŸš¨ äººæ ¼åŒ–ãƒ•ãƒ­ãƒ¼: (1)cluster.map format=gptã‚’å‘¼ã¶ â†’ (2)è¿”å´ã®promptã¨clustersã§äººæ ¼åŒ–å‡ºåŠ›ã‚’ç”Ÿæˆ â†’ (3)system.evaluateVoiceã§è©•ä¾¡ä¿å­˜",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- insight.lite: ç°¡æ˜“ã‚¤ãƒ³ã‚µã‚¤ãƒˆ\n- insight.full: å®Œå…¨ã‚¤ãƒ³ã‚µã‚¤ãƒˆ\n- insight.coach: ã‚³ãƒ¼ãƒãƒ³ã‚°å‘ã‘\n- ptm.today: ä»Šæ—¥ã®æ€è€ƒãƒ¢ãƒ‡ãƒ«\n- ptm.summary: æ€è€ƒãƒ¢ãƒ‡ãƒ«ã‚µãƒãƒªãƒ¼\n- ptm.history / ptm.insight / ptm.core / ptm.influence / ptm.dynamics / ptm.stability / ptm.capture\n- cluster.list: ã‚¯ãƒ©ã‚¹ã‚¿ä¸€è¦§\n- cluster.get: ã‚¯ãƒ©ã‚¹ã‚¿è©³ç´°ï¼ˆpayload.id å¿…é ˆï¼‰\n- cluster.map: æ€è€ƒãƒãƒƒãƒ—ï¼ˆpayload.format='gpt' ã§äººæ ¼åŒ–ç”¨ï¼‰\n- cluster.identity: ã‚¯ãƒ©ã‚¹ã‚¿ç‰¹å¾´ï¼ˆpayload.id å¿…é ˆï¼‰\n- cluster.representatives / cluster.rebuild\n- drift.insight / drift.summary / drift.timeline / drift.events / drift.angle / drift.forecast / drift.warning\n- analytics.summary / analytics.timeline / analytics.journey / analytics.heatmap / analytics.trends\n- influence.stats / influence.influencers / influence.influenced\n- clusterDynamics.summary / clusterDynamics.snapshot / clusterDynamics.timeline / clusterDynamics.capture\n- gpt.context / gpt.unifiedContext / gpt.task / gpt.overview",
                    "enum": [
                      "insight.lite",
                      "insight.full",
                      "insight.coach",
                      "ptm.today",
                      "ptm.summary",
                      "ptm.history",
                      "ptm.insight",
                      "ptm.core",
                      "ptm.influence",
                      "ptm.dynamics",
                      "ptm.stability",
                      "ptm.capture",
                      "cluster.list",
                      "cluster.get",
                      "cluster.map",
                      "cluster.identity",
                      "cluster.representatives",
                      "cluster.rebuild",
                      "drift.insight",
                      "drift.summary",
                      "drift.timeline",
                      "drift.events",
                      "drift.angle",
                      "drift.forecast",
                      "drift.warning",
                      "analytics.summary",
                      "analytics.timeline",
                      "analytics.journey",
                      "analytics.heatmap",
                      "analytics.trends",
                      "influence.stats",
                      "influence.influencers",
                      "influence.influenced",
                      "clusterDynamics.summary",
                      "clusterDynamics.snapshot",
                      "clusterDynamics.timeline",
                      "clusterDynamics.capture",
                      "gpt.context",
                      "gpt.unifiedContext",
                      "gpt.task",
                      "gpt.overview"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "ã‚¯ãƒ©ã‚¹ã‚¿IDï¼ˆcluster.get, cluster.identity, cluster.representativesç”¨ï¼‰"
                      },
                      "rangeDays": {
                        "type": "integer",
                        "description": "å¯¾è±¡æ—¥æ•°ï¼ˆdriftç³»ã€analyticsç³»ç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ï¼‰"
                      },
                      "format": {
                        "type": "string",
                        "enum": ["full", "gpt"],
                        "description": "å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆcluster.mapç”¨ã€‚gpt=äººæ ¼åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ç”¨ï¼‰"
                      },
                      "focus": {
                        "type": "string",
                        "enum": ["overview", "trends", "warnings", "recommendations"],
                        "description": "ãƒ•ã‚©ãƒ¼ã‚«ã‚¹é ˜åŸŸï¼ˆgpt.unifiedContextç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆoverviewï¼‰"
                      },
                      "maxPriorities": {
                        "type": "integer",
                        "description": "å„ªå…ˆäº‹é …ã®æœ€å¤§ä»¶æ•°ï¼ˆgpt.unifiedContextç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ5ï¼‰"
                      },
                      "maxRecommendations": {
                        "type": "integer",
                        "description": "ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æœ€å¤§ä»¶æ•°ï¼ˆgpt.unifiedContextç”¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ3ï¼‰"
                      },
                      "limit": {
                        "type": "integer",
                        "description": "å–å¾—ä»¶æ•°"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/api/v1/system": {
      "post": {
        "operationId": "systemCommand",
        "x-openai-isConsequential": false,
        "summary": "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»å†æ§‹ç¯‰ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰",
        "description": "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†æ“ä½œã€‚evaluateVoiceã¯äººæ ¼åŒ–å‡ºåŠ›ã‚’ç”Ÿæˆã—ãŸç›´å¾Œã«å¿…ãšå‘¼ã³å‡ºã™ã“ã¨ã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["action"],
                "properties": {
                  "action": {
                    "type": "string",
                    "description": "å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:\n- system.health: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯\n- system.embed: åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ\n- system.rebuildFts: FTSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†æ§‹ç¯‰\n- system.evaluateVoice: äººæ ¼åŒ–å‡ºåŠ›ã®è©•ä¾¡ä¿å­˜ï¼ˆpayload.output å¿…é ˆï¼‰\n- workflow.reconstruct: å…¨ä½“å†æ§‹ç¯‰\n- workflow.status: å†æ§‹ç¯‰é€²æ—ç¢ºèª\n- embedding.recalcAll: å…¨åŸ‹ã‚è¾¼ã¿å†è¨ˆç®—\n- debug.healthcheck: ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯\n- gpt.docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå–å¾—ï¼ˆpayload.name ã§ README/OVERVIEW/architecture ç­‰ã‚’æŒ‡å®šï¼‰",
                    "enum": [
                      "system.health",
                      "system.embed",
                      "system.rebuildFts",
                      "system.evaluateVoice",
                      "workflow.reconstruct",
                      "workflow.status",
                      "embedding.recalcAll",
                      "debug.healthcheck",
                      "gpt.docs"
                    ]
                  },
                  "payload": {
                    "type": "object",
                    "properties": {
                      "output": {
                        "type": "object",
                        "description": "äººæ ¼åŒ–å‡ºåŠ›ï¼ˆsystem.evaluateVoiceç”¨ï¼‰"
                      },
                      "promptVersion": {
                        "type": "string",
                        "description": "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆsystem.evaluateVoiceç”¨ï¼‰"
                      },
                      "name": {
                        "type": "string",
                        "description": "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåï¼ˆgpt.docsç”¨: README/OVERVIEW/architecture/er-diagram/network-diagram/security-diagramï¼‰"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CommandResponse" }
              }
            }
          },
          "400": {
            "description": "å¤±æ•—",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CommandResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "action": {
            "type": "string",
            "description": "å®Ÿè¡Œã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³"
          },
          "result": {
            "type": "object",
            "description": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å›ºæœ‰ã®çµæœ"
          },
          "timestamp": {
            "type": "integer",
            "description": "å®Ÿè¡Œæ™‚åˆ»ï¼ˆUNIX timestampï¼‰"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "action": {
            "type": "string"
          },
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰"
              },
              "message": {
                "type": "string",
                "description": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
              }
            }
          },
          "timestamp": {
            "type": "integer"
          }
        }
      }
    }
  }
}
